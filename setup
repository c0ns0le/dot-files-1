#!/bin/bash

bkup="backup/home/$(date +%s)"

function dot_setup()
{
  for dots in bash/home list/home hitch vim
  do
    for fil in $dots/*
    do
      if [ -f "$HOME/.$(basename $fil)" ]
      then
        mkdir -pv "$bkup" | sed 's/^/mkdir: /'
        mv -v "$HOME/.$(basename $fil)" "${bkup}/"
      fi
      ln -s "$(pwd)/$fil" "$HOME/.$(basename $fil)"
    done
  done

  for bins in bin bin/empties bin/resources bin/tests
  do
    mkdir -pv "${HOME}/$bins"
    for fil in $bins/*
    do
      if [ -f "$fil" ]
      then
        if [ -f "$HOME/$fil" ]
        then
          mkdir -pv "$bkup/$bins" | sed 's/^/mkdir: /'
          mv -v "$HOME/$fil" "${bkup}/$fil"
        fi
        ln -s "$(pwd)/$fil" "${HOME}/$fil"
      fi
    done
  done
}

dot_setup

## # /etc/bashrc
## sudo mv /etc/bashrc $dot_dir/bash/etc/
## sudo ln -s $dot_dir/bash/etc/bashrc /etc/bashrc
##
## # /etc/profile
## sudo mv /etc/profile $dot_dir/bash/etc/
## sudo ln -s $dot_dir/bash/etc/profile /etc/profile

